import{a as e,r as a,b as t,j as s,d as r,P as n,e as l,B as i,S as o,c as d}from"./index-B2XvNDaG.js";import{i as c}from"./axiosClient-Bl7wR9qs.js";import{u,q as m}from"./queryOptions-Dj-1I9it.js";import{u as x}from"./useMutation-BG0cvSJV.js";import{B as g}from"./Button-BuwFoh-h.js";import{S as h,f as p,i as f}from"./id-HqmWD3a3.js";import{C as b,a as y,b as j,c as v,d as w,e as N}from"./card-CJZ17ex6.js";import{I as T}from"./input-Drd92ogd.js";import{L as k}from"./label-Cmah1-gR.js";import{T as C}from"./trending-up-BXJJxlnp.js";import{P as S,T as B}from"./trash-2-iEaKNaVF.js";const M=e("gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),D=e("piggy-bank",[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]]);function L(e={}){const{mutation:a={},client:t={}}=e??{},{client:s,...r}=a,n=r.mutationKey??[{url:"/api/Setoran/setor"}];return x({mutationFn:async({data:e,params:a})=>async function(e,a,t={}){const{client:s=c,...r}=t;return await s({method:"POST",url:"/api/Setoran/setor",params:a,data:e,...r,headers:{"Content-Type":"application/*+json",...r.headers}})}(e,a,t),mutationKey:n,...r},s)}function R(e={}){const{mutation:a={},client:t={}}=e??{},{client:s,...r}=a,n=r.mutationKey??[{url:"/api/TargetTabungan/ResetTarget/{idTargetTabungan}"}];return x({mutationFn:async({idTargetTabungan:e})=>async function(e,a={}){const{client:t=c,...s}=a;return await t({method:"DELETE",url:`/api/TargetTabungan/ResetTarget/${e}`,...s})}(e,t),mutationKey:n,...r},s)}function P(e={}){return m({queryKey:[{url:"/api/TargetTabungan"}],queryFn:async({signal:a})=>(e.signal=a,async function(e={}){const{client:a=c,...t}=e;return await a({method:"GET",url:"/api/TargetTabungan",...t})}(e))})}function K(e={}){const{mutation:a={},client:t={}}=e??{},{client:s,...r}=a,n=r.mutationKey??[{url:"/api/TargetTabungan"}];return x({mutationFn:async e=>async function(e,a={}){const{client:t=c,...s}=a,r=new FormData;return e&&Object.keys(e).forEach(a=>{const t=e[a];null!=t&&r.append(a,t)}),await t({method:"POST",url:"/api/TargetTabungan",...s,data:r,headers:{"Content-Type":"multipart/form-data",...s.headers}})}(e,t),mutationKey:n,...r},s)}function $(e={}){const{mutation:a={},client:t={}}=e??{},{client:s,...r}=a,n=r.mutationKey??[{url:"/api/TargetTabungan/AutoDeleteTarget"}];return x({mutationFn:async()=>async function(e={}){const{client:a=c,...t}=e;return await a({method:"POST",url:"/api/TargetTabungan/AutoDeleteTarget",...t})}(t),mutationKey:n,...r},s)}const A=()=>{const[e,r]=a.useState(!1),[n,l]=a.useState(""),[i,o]=a.useState(""),[d,c]=a.useState(""),[u,m]=a.useState(""),[x,h]=a.useState(null),[p,f]=a.useState(null),{mutateAsync:b,isPending:y,isError:j,error:v}=K(),w=t(),N=()=>{l(""),o(""),c(""),m(""),h(null),f(null)};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed top-20 right-4 z-10 sm:absolute",children:s.jsxs(g,{type:"button",variant:"primary",onClick:()=>r(!0),className:"px-3 py-2.5 sm:px-4 sm:py-3 md:px-5 md:py-3 text-xs sm:text-sm md:text-base shadow-md hover:shadow-lg flex items-center gap-1 sm:gap-2 transition-all transform hover:scale-105",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-5 sm:w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),s.jsx("span",{className:"hidden sm:inline",children:"Create Target Tabungan"}),s.jsx("span",{className:"sm:hidden",children:"Create"})]})}),e&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-5 pb-2 border-b border-gray-200",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Buat Target Tabungan Baru"}),s.jsx("button",{type:"button",className:"text-gray-500 hover:text-gray-700 rounded-full p-1 hover:bg-gray-100 transition-colors",onClick:()=>r(!1),children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("form",{onSubmit:async e=>{e.preventDefault();const a=Number(d.replace(/\./g,"").replace(",",".")),t={NamaTarget:n,Deskripsi:i,NominalTarget:a.toString(),TanggalTarget:u,file:x};try{await b(t),await w.invalidateQueries({queryKey:[{url:"/api/TargetTabungan"}]}),r(!1),N()}catch(s){console.error("Error:",s)}},className:"space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nama Target"}),s.jsx("input",{type:"text",value:n,onChange:e=>l(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-gray-50 transition-colors",placeholder:"Contoh: Liburan ke Bali",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deskripsi"}),s.jsx("textarea",{value:i,onChange:e=>o(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-gray-50 min-h-[100px] transition-colors",placeholder:"Tulis deskripsi target tabungan..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nominal Target"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-500",children:s.jsx("span",{children:"Rp"})}),s.jsx("input",{type:"text",value:d,onChange:e=>{const a=e.target.value;c((e=>{const a=e.replace(/[^,\d]/g,"").toString().split(",");let t=a[0].length%3,s=a[0].substr(0,t);const r=a[0].substr(t).match(/\d{3}/gi);r&&(s+=(t?".":"")+r.join("."));return void 0!==a[1]?s+","+a[1]:s})(a))},className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-gray-50 text-lg transition-colors",placeholder:"0",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tanggal Target"}),s.jsx("input",{type:"date",value:u,onChange:e=>m(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-gray-50 transition-colors",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Gambar"}),s.jsx("input",{type:"file",onChange:e=>{const a=e.target.files?e.target.files[0]:null;if(a){h(a);const e=new FileReader;e.onloadend=()=>{f(e.result)},e.readAsDataURL(a)}},accept:"image/*",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-gray-50 transition-colors"}),p&&s.jsxs("div",{className:"mt-4",children:[s.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Preview:"}),s.jsx("div",{className:"border border-gray-200 rounded-xl p-2 flex justify-center",children:s.jsx("img",{src:p,alt:"Preview",className:"rounded-lg object-contain max-h-48"})})]})]}),s.jsx("div",{className:"pt-3",children:s.jsx(g,{type:"submit",variant:"primary",disabled:y,className:"w-full py-3.5 font-medium rounded-xl text-base shadow-md hover:shadow-lg transition-all",children:y?s.jsxs("span",{className:"flex items-center justify-center",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Menyimpan..."]}):s.jsxs("span",{className:"flex items-center justify-center gap-2",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Buat Target Tabungan"]})})}),j&&s.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-100 rounded-xl text-red-600 text-sm",children:v?.response?.data?.message||v?.message||"Terjadi kesalahan saat membuat target"})]})]})})})]})};var q="Progress",z=100,[E,F]=r(q),[I,O]=E(q),G=a.forwardRef((e,a)=>{const{__scopeProgress:t,value:r=null,max:l,getValueLabel:i=V,...o}=e;!l&&0!==l||Q(l)||console.error(`Invalid prop \`max\` of value \`${`${l}`}\` supplied to \`${"Progress"}\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`);const d=Q(l)?l:z;null===r||U(r,d)||console.error(function(e,a){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${a}\`. The \`value\` prop must be:\n  - a positive number\n  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)\n  - \`null\` or \`undefined\` if the progress is indeterminate.\n\nDefaulting to \`null\`.`}(`${r}`,"Progress"));const c=U(r,d)?r:null,u=J(c)?i(c,d):void 0;return s.jsx(I,{scope:t,value:c,max:d,children:s.jsx(n.div,{"aria-valuemax":d,"aria-valuemin":0,"aria-valuenow":J(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":_(c,d),"data-value":c??void 0,"data-max":d,...o,ref:a})})});G.displayName=q;var H="ProgressIndicator",W=a.forwardRef((e,a)=>{const{__scopeProgress:t,...r}=e,l=O(H,t);return s.jsx(n.div,{"data-state":_(l.value,l.max),"data-value":l.value??void 0,"data-max":l.max,...r,ref:a})});function V(e,a){return`${Math.round(e/a*100)}%`}function _(e,a){return null==e?"indeterminate":e===a?"complete":"loading"}function J(e){return"number"==typeof e}function Q(e){return J(e)&&!isNaN(e)&&e>0}function U(e,a){return J(e)&&!isNaN(e)&&e<=a&&e>=0}W.displayName=H;var Y=G,X=W;function Z({className:e,value:a,...t}){return s.jsx(Y,{"data-slot":"progress",className:l("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...t,children:s.jsx(X,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})})}function ee({onClose:e,initialNamaTarget:r}){const[n,l]=a.useState(r||""),[d,c]=a.useState(""),[u,m]=a.useState(!1),{mutateAsync:x}=L(),g=t();a.useEffect(()=>{r&&l(r)},[r]);return s.jsxs("div",{className:"bg-white p-4 sm:p-6 rounded-xl shadow-lg max-w-md w-full mx-4 sm:mx-auto relative border border-gray-100",children:[s.jsx("button",{onClick:e,className:"absolute -top-2 -right-2 bg-gray-100 hover:bg-gray-200 text-gray-600 rounded-full w-8 h-8 flex items-center justify-center shadow-md transition-all duration-200 text-xl font-bold hover:scale-105","aria-label":"Tutup Form",children:"×"}),s.jsxs("div",{className:"mb-5",children:[s.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-800 text-center",children:"Setoran Tabungan"}),s.jsx("div",{className:"w-16 h-1 bg-indigo-500 mx-auto mt-2 rounded-full"})]}),s.jsxs("form",{onSubmit:async a=>{a.preventDefault();const t=parseInt(d.replace(/\./g,"")||"",10);n.trim()?t<=0?o.fire({icon:"error",title:"Nominal Tidak Valid",text:"Nominal setoran harus lebih dari 0",confirmButtonColor:"#4f46e5",background:"#f9fafb",color:"#1f2937"}):o.fire({title:"Konfirmasi Setoran",html:`<div class="text-left">\n        <p class="mb-2">Anda akan menyetor sebesar:</p>\n        <p class="text-2xl font-bold text-indigo-600 mb-3">Rp${t.toLocaleString("id-ID")}</p>\n        <p>untuk target tabungan <b class="text-gray-800">${n}</b></p>\n      </div>`,icon:"question",showCancelButton:!0,confirmButtonColor:"#4f46e5",cancelButtonColor:"#6b7280",confirmButtonText:"Ya, Setor Sekarang",cancelButtonText:"Batal",reverseButtons:!0,background:"#f9fafb",color:"#1f2937",customClass:{popup:"rounded-lg shadow-xl",title:"text-left text-gray-800 font-semibold",htmlContainer:"text-left"}}).then(async a=>{if(a.isConfirmed)try{m(!0),o.fire({title:"Sedang memproses...",text:"Mohon tunggu sebentar",allowOutsideClick:!1,didOpen:()=>{o.showLoading()},background:"#f9fafb"}),await x({params:{namaTarget:n},data:{nominalSetor:t}}),g.invalidateQueries({queryKey:[{url:"/api/TargetTabungan"}]}),o.close(),await o.fire({icon:"success",title:"Setoran Berhasil!",html:`<div class="text-center">\n              <svg class="w-16 h-16 text-green-500 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>\n              </svg>\n              <p class="mb-1">Setoran untuk <b>${n}</b> berhasil!</p>\n              <p class="text-xl font-bold text-green-600">Rp${t.toLocaleString("id-ID")}</p>\n            </div>`,confirmButtonColor:"#4f46e5",background:"#f9fafb",customClass:{popup:"rounded-lg shadow-xl"}}),c(""),e()}catch(s){let e="Terjadi kesalahan saat menyetor";s?.response?.data?e=s.response.data.Message||s.response.data.message||JSON.stringify(s.response.data):s?.message&&(e=s.message),o.fire({icon:"error",title:"Setoran Gagal",html:`<div class="text-left">\n              <p class="mb-2">${e}</p>\n              <p class="text-sm text-gray-500 mt-2">Silakan coba lagi atau hubungi administrator</p>\n            </div>`,confirmButtonColor:"#4f46e5",background:"#f9fafb",color:"#1f2937",customClass:{popup:"rounded-lg shadow-xl"}})}finally{m(!1)}}):o.fire({icon:"error",title:"Nama Target Kosong",text:"Nama target tabungan harus diisi",confirmButtonColor:"#4f46e5",background:"#f9fafb",color:"#1f2937"})},className:"space-y-5",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(k,{htmlFor:"namaTarget",className:"text-gray-700 font-medium",children:"Target Tabungan"}),s.jsx("span",{className:"text-xs bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full",children:"Wajib"})]}),s.jsx(T,{id:"namaTarget",type:"text",value:n,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-gray-50 text-gray-800",disabled:!0}),r&&s.jsx("p",{className:"text-xs text-gray-500 mt-2 italic",children:"Menyetor untuk target yang dipilih"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(k,{htmlFor:"nominalSetor",className:"text-gray-700 font-medium",children:"Jumlah Setoran"}),s.jsx("span",{className:"text-xs bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full",children:"Wajib"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 font-medium",children:"Rp"}),s.jsx(T,{id:"nominalSetor",type:"text",value:d,onChange:e=>{const a=e.target.value.replace(/\./g,"");c(a.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,"."))},placeholder:"0",className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-gray-800 text-lg",disabled:u,inputMode:"numeric"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-2 italic",children:"Masukkan nominal tanpa titik atau koma"})]}),s.jsx(i,{type:"submit",className:"w-full py-3 px-4 rounded-xl font-medium text-lg transition-all duration-200 shadow-md "+(u?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-indigo-600 to-indigo-700 hover:from-indigo-700 hover:to-indigo-800 hover:shadow-lg transform hover:-translate-y-0.5"),disabled:u,children:u?s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Memproses..."]}):s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Setor Sekarang"]})})]})]})}function ae(){const{data:e,isLoading:t,isError:r,error:n,refetch:l}=function(e={}){const{query:{client:a,...t}={},client:s={}}=e??{},r=t?.queryKey??[{url:"/api/TargetTabungan"}],n=u({...P(s),queryKey:r,...t},a);return n.queryKey=r,n}(),i=Array.isArray(e?.data)?e.data:[],[d,c]=a.useState({}),[m,x]=a.useState(null),g=$(),T=R();a.useEffect(()=>{(async()=>{try{await g.mutateAsync(),l()}catch(e){console.error("Gagal melakukan auto-delete:",e)}})()},[]);return t?s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(e=>s.jsxs(b,{className:"border-0 shadow rounded-xl overflow-hidden",children:[s.jsxs(y,{className:"pb-2",children:[s.jsx(h,{className:"h-5 w-3/4 rounded-full"}),s.jsx(h,{className:"h-3 w-full mt-1 rounded-full"})]}),s.jsxs(j,{className:"pb-2",children:[s.jsx(h,{className:"h-28 w-full rounded-lg mb-3"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(h,{className:"h-3 w-full rounded-full"}),s.jsx(h,{className:"h-3 w-4/5 rounded-full"})]})]}),s.jsx(v,{children:s.jsx(h,{className:"h-6 w-16 rounded-full"})})]},e))}):r?s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 text-center max-w-md mx-auto",children:[s.jsx("div",{className:"bg-red-100 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsx("h3",{className:"font-bold text-red-800 text-md",children:"Gagal memuat data 😢"}),s.jsx("p",{className:"text-red-600 mt-1 text-xs",children:n?.message||"Coba refresh halaman atau cek koneksi"}),s.jsx("button",{className:"mt-3 px-3 py-1.5 bg-red-100 hover:bg-red-200 text-red-700 rounded-full text-xs font-medium transition-colors",onClick:()=>window.location.reload(),children:"Coba Lagi"})]}):0===i.length?s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6 text-center max-w-md mx-auto",children:[s.jsx("div",{className:"bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(D,{className:"h-8 w-8 text-blue-600"})}),s.jsx("h3",{className:"font-bold text-blue-800 text-lg",children:"Belum ada target tabungan"}),s.jsx("p",{className:"text-blue-600 mt-1 text-sm",children:"Buat target tabungan baru untuk memulai perencanaan keuangan"})]}):s.jsxs("div",{className:"flex justify-center",children:[s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 w-full max-w-5xl",children:i.map(e=>{const a=e.nominalTerkumpul||0,t=e.nominalTarget||1,r=d[e.idTargetTabungan],n=Math.min(Math.round(a/t*100),100),i=n>=100,u=i?"Tercapai":e.status||"Dalam Proses";let m=null;if(e.tanggalTarget){const a=new Date(e.tanggalTarget),t=new Date,s=a.getTime()-t.getTime();m=Math.ceil(s/864e5)}return s.jsxs(b,{className:"flex flex-col h-full border-0 shadow rounded-xl overflow-hidden hover:shadow-md transition-all",children:[s.jsx(y,{className:"pb-2",children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx("div",{className:"p-1.5 rounded-md "+(i?"bg-green-100":"bg-blue-100"),children:i?s.jsx(M,{className:"h-4 w-4 text-green-600"}):s.jsx(C,{className:"h-4 w-4 text-blue-600"})}),s.jsxs("div",{children:[s.jsx(w,{className:"text-sm font-bold line-clamp-1",children:e.namaTarget}),e.deskripsi&&s.jsx(N,{className:"line-clamp-1 text-xs mt-0.5",children:e.deskripsi})]})]})}),s.jsxs(j,{className:"flex-grow pb-2",children:[e.gambar&&!r?s.jsx("div",{className:"mb-3 flex justify-center",children:s.jsx("div",{className:"rounded-lg overflow-hidden max-w-full border flex items-center justify-center",children:s.jsx("img",{src:`http://localhost:9999${e.gambar}`,alt:e.namaTarget,className:"max-h-32 w-auto object-scale-down",onError:()=>{return a=e.idTargetTabungan,void c(e=>({...e,[a]:!0}));var a},style:{maxWidth:"100%",height:"auto"}})})}):s.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 border border-dashed border-gray-200 rounded-lg w-full h-32 mb-3 flex items-center justify-center",children:s.jsxs("div",{className:"text-center p-2",children:[s.jsx(D,{className:"h-6 w-6 text-gray-400 mx-auto mb-1"}),s.jsx("span",{className:"text-gray-500 text-xs",children:r?"Gagal memuat":"No image"})]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between mb-0.5",children:[s.jsxs("span",{className:"text-xs font-medium text-gray-700",children:[n,"%"]}),s.jsx("span",{className:"text-xs font-medium text-gray-500",children:i?"Selesai":null!==m?`${m} hari`:"-"})]}),s.jsx(Z,{value:n,className:"h-2 rounded-full "+(i?"bg-green-200":"bg-blue-200"),indicatorClassName:i?"bg-green-500":"bg-gradient-to-r from-blue-500 to-indigo-600"}),s.jsxs("div",{className:"flex justify-between mt-1 text-xs",children:[s.jsxs("span",{className:"font-medium text-gray-900",children:["Rp",a.toLocaleString("id-ID")]}),s.jsxs("span",{className:"font-medium text-gray-900",children:["Rp",t.toLocaleString("id-ID")]})]})]}),s.jsx("div",{className:"bg-gray-50 rounded-lg p-1.5",children:s.jsxs("div",{className:"grid grid-cols-2 gap-1.5 text-xs",children:[s.jsxs("div",{className:"bg-white p-1 rounded",children:[s.jsx("p",{className:"text-[10px] text-gray-500",children:"Mulai"}),s.jsx("p",{className:"font-medium",children:e.tanggalMulai?p(new Date(e.tanggalMulai),"dd MMM yy",{locale:f}):"-"})]}),s.jsxs("div",{className:"bg-white p-1 rounded",children:[s.jsx("p",{className:"text-[10px] text-gray-500",children:"Target"}),s.jsx("p",{className:"font-medium",children:e.tanggalTarget?p(new Date(e.tanggalTarget),"dd MMM yy",{locale:f}):"-"})]})]})})]})]}),s.jsxs(v,{className:"pt-0 px-3 pb-2 flex justify-between items-center",children:[s.jsx("div",{className:"px-2 py-1 rounded-full text-[10px] font-medium text-center "+(i?"bg-green-100 text-green-800":"bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-800"),children:u}),s.jsxs("div",{className:"flex space-x-1",children:[!i&&s.jsx("button",{onClick:()=>x({namaTarget:e.namaTarget}),className:"text-gray-500 hover:text-green-600 p-1",title:"Setor tabungan",children:s.jsx(S,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>(async e=>{const a=await o.fire({title:"Apakah Anda yakin ingin menghapus target tabungan ini?",text:"Data yang dihapus tidak dapat dipulihkan.",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya, Hapus!",cancelButtonText:"Batal",reverseButtons:!0,preConfirm:async()=>{o.showLoading();try{return await T.mutateAsync({idTargetTabungan:e}),!0}catch(a){return console.error("Gagal menghapus target tabungan:",a),!1}},willClose:()=>{T.isPending&&T.reset()}});a.isConfirmed?(o.fire({icon:"success",title:"Target tabungan berhasil dihapus!",showConfirmButton:!1,timer:1500}),l()):a.dismiss===o.DismissReason.cancel&&o.fire({icon:"info",title:"Penghapusan dibatalkan",showConfirmButton:!1,timer:1500})})(e.idTargetTabungan),className:"text-gray-500 hover:text-red-500 p-1",disabled:T.isPending,title:"Hapus target",children:s.jsx(B,{className:"h-4 w-4"})})]})]})]},e.idTargetTabungan)})}),m&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:s.jsx(ee,{onClose:()=>x(null),initialNamaTarget:m.namaTarget})})]})}const te=d("/_protected/TargetTabungan/")({component:se});function se(){return s.jsxs("div",{children:[s.jsx("div",{children:s.jsx(A,{})}),s.jsx("div",{children:s.jsx(ae,{})})]})}export{te as Route,se as default};

import{j as e,r as a,e as s,p as r,c as t,u as i,B as n}from"./index-DuP29WnI.js";import{F as o,C as m,b as l,c as d,u as c,a as u,L as x,t as h,o as g,s as f}from"./index-CQHPdDus.js";import{i as p}from"./axiosClient-BhEPqxcn.js";import{u as j}from"./useMutation-DEcMuSr-.js";import{C as b,a as k,d as w,e as v,b as N}from"./card-UT-ZE_p0.js";import{L as y}from"./label-QXOYTvdS.js";import{I}from"./input-Cj5H0HvW.js";function P(e={}){const{mutation:a={},client:s={}}=e??{},{client:r,...t}=a,i=t.mutationKey??[{url:"/api/auth/reset-password-request"}];return j({mutationFn:async({data:e})=>async function(e,a={}){const{client:s=p,...r}=a;return await s({method:"POST",url:"/api/auth/reset-password-request",data:e,...r,headers:{"Content-Type":"application/*+json",...r.headers}})}(e,s),mutationKey:i,...t},r)}const F=o,T=a.createContext({}),C=({...a})=>e.jsx(T.Provider,{value:{name:a.name},children:e.jsx(m,{...a})}),E=()=>{const e=a.useContext(T),s=a.useContext(M),{getFieldState:r}=l(),t=d({name:e.name}),i=r(e.name,t);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:n}=s;return{id:n,name:e.name,formItemId:`${n}-form-item`,formDescriptionId:`${n}-form-item-description`,formMessageId:`${n}-form-item-message`,...i}},M=a.createContext({});function S({className:r,...t}){const i=a.useId();return e.jsx(M.Provider,{value:{id:i},children:e.jsx("div",{"data-slot":"form-item",className:s("grid gap-2",r),...t})})}function O({className:a,...r}){const{error:t,formItemId:i}=E();return e.jsx(y,{"data-slot":"form-label","data-error":!!t,className:s("data-[error=true]:text-destructive",a),htmlFor:i,...r})}function $({...a}){const{error:s,formItemId:t,formDescriptionId:i,formMessageId:n}=E();return e.jsx(r,{"data-slot":"form-control",id:t,"aria-describedby":s?`${i} ${n}`:`${i}`,"aria-invalid":!!s,...a})}function A({className:a,...r}){const{error:t,formMessageId:i}=E(),n=t?String(t?.message??""):r.children;return n?e.jsx("p",{"data-slot":"form-message",id:i,className:s("text-destructive text-sm",a),...r,children:n}):null}const K=g({email:f().email("Email tidak valid").min(1,"Email harus diisi")}),L=t("/ForgotPassword/SendEmail/")({component:function(){const a=c({resolver:u(K),defaultValues:{email:""}}),s=i(),{mutate:r,isPending:t,isSuccess:o}=P({mutation:{onSuccess:e=>{localStorage.setItem("resetPasswordEmail",a.getValues("email")),h.success("Email Terkirim!",{description:e.message||"OTP telah dikirim ke email Anda"}),s({to:"/ForgotPassword/VerifikasiOtp"})},onError:e=>{h.error("Gagal Mengirim Email",{description:e.message||"Terjadi kesalahan saat mengirim OTP"})}}});return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:e.jsxs(b,{className:"w-full max-w-md shadow-lg rounded-2xl",children:[e.jsxs(k,{className:"text-center",children:[e.jsx("div",{className:"mx-auto bg-blue-100 p-3 rounded-full w-16 h-16 flex items-center justify-center",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),e.jsx(w,{className:"mt-4 text-2xl font-bold text-gray-800",children:"Lupa Password?"}),e.jsx(v,{className:"mt-2 text-gray-600",children:"Kok bisa lupa? Astagaaaa, jangan khawatir! Masukkan email kamu di bawah ini, dan kami akan mengirimkan kode OTP untuk mengatur ulang password kamu."})]}),e.jsxs(N,{children:[e.jsx(F,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(e=>{r({data:e})}),className:"space-y-6",children:[e.jsx(C,{control:a.control,name:"email",render:({field:a})=>e.jsxs(S,{children:[e.jsx(O,{children:"Email"}),e.jsx($,{children:e.jsx(I,{placeholder:"nama@email.com",type:"email",...a,className:"py-5 px-4 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),e.jsx(A,{className:"text-red-500"})]})}),e.jsx(n,{type:"submit",disabled:t||o,className:"w-full py-5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition duration-300 shadow-md",children:t?e.jsxs(e.Fragment,{children:[e.jsx(x,{className:"mr-2 h-4 w-4 animate-spin"}),"Mengirim..."]}):o?"OTP Terkirim!":"Kirim OTP"}),o&&e.jsxs("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg text-green-700 text-center",children:[e.jsx("p",{className:"font-medium",children:"âœ“ Cek email Anda"}),e.jsx("p",{className:"text-sm mt-1",children:"Kami telah mengirim kode OTP ke email Anda. Periksa folder spam jika tidak ditemukan."})]})]})}),e.jsx("div",{className:"mt-6 text-center text-sm text-gray-600",children:e.jsxs("p",{children:["Ingat password Anda?"," ",e.jsx("a",{href:"/login",className:"font-medium text-blue-600 hover:text-blue-800",children:"Masuk disini"})]})})]})]})})}});export{L as Route};

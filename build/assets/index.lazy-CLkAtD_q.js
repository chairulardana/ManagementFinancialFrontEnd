import{j as e,r as a,u as t,G as n,S as s,c as o}from"./index-DkQNp0KD.js";import{i}from"./axiosClient-DRV_U9H6.js";import{u as r}from"./useMutation-h4GiL12z.js";import{L as l,a as d}from"./Logo-Eeios5Y7.js";import{F as c,a as m,b as u,I as g,c as x}from"./index-DTFqOXo1.js";function h(e={}){const{mutation:a={},client:t={}}=e??{},{client:n,...s}=a,o=s.mutationKey??[{url:"/api/auth/google-login"}];return r({mutationFn:async({data:e})=>async function(e,a={}){const{client:t=i,...n}=a;return await t({method:"POST",url:"/api/auth/google-login",data:e,...n,headers:{"Content-Type":"application/*+json",...n.headers}})}(e,t),mutationKey:o,...s},n)}function f(e={}){const{mutation:a={},client:t={}}=e??{},{client:n,...s}=a,o=s.mutationKey??[{url:"/api/auth/login"}];return r({mutationFn:async({data:e})=>async function(e,a={}){const{client:t=i,...n}=a;return await t({method:"POST",url:"/api/auth/login",data:e,...n,headers:{"Content-Type":"application/*+json",...n.headers}})}(e,t),mutationKey:o,...s},n)}const p=({label:a,htmlFor:t,children:n,className:s=""})=>e.jsxs("div",{className:`mb-4 ${s}`,children:[e.jsx("label",{htmlFor:t,className:"block text-gray-700 font-medium mb-1 text-xs md:text-sm",children:a}),n]}),j=({value:t,onChange:n})=>{const[s,o]=a.useState(!1);return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-500",children:e.jsx(c,{className:"text-indigo-500"})}),e.jsx("input",{type:s?"text":"password",name:"password",value:t,onChange:n,className:"w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition",placeholder:"••••••••",required:!0}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-indigo-500 hover:text-indigo-700 transition-colors",onClick:()=>o(!s),children:s?e.jsx(m,{}):e.jsx(u,{})})]})},b=({id:a,label:t})=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:a,name:a,type:"checkbox",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:a,className:"ml-2 block text-sm text-gray-700",children:t})]}),N=()=>e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx(b,{id:"remember-me",label:"Ingat saya"}),e.jsx("div",{className:"text-sm",children:e.jsx("a",{href:"/ForgotPassword/SendEmail",className:"font-medium text-indigo-600 hover:text-indigo-500 transition-colors",children:"Lupa password?"})})]}),w=({onSubmit:t})=>{const[n,s]=a.useState(""),[o,i]=a.useState("");return e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),await t(n,o)},children:[e.jsx(p,{label:"Email/Nama Lengkap",htmlFor:"email",children:e.jsx(g,{type:"text",name:"email",value:n,onChange:e=>s(e.target.value),placeholder:"example@gmail.com / ChairulArdana",icon:e.jsx(x,{className:"text-indigo-500"}),required:!0})}),e.jsx(p,{label:"Password",htmlFor:"password",children:e.jsx(j,{value:o,onChange:e=>i(e.target.value)})}),e.jsx(N,{}),e.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-indigo-600 to-blue-600 text-white py-3 px-4 rounded-lg hover:from-indigo-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all shadow-md hover:shadow-lg transform hover:-translate-y-0.5",children:"Masuk"})]})},k=({className:o=""})=>{const i=t(),[r,l]=a.useState(!1),{mutateAsync:d}=h();return e.jsx(n,{onSuccess:async e=>{const{credential:a}=e;if(a)try{l(!0),s.fire({title:"Sedang memproses...",text:"Mohon tunggu sebentar",allowOutsideClick:!1,didOpen:()=>{s.showLoading()}});const e=await d({data:{credential:a}}),t=e?.data?.token;t?(sessionStorage.setItem("Access_Google",t),s.close(),s.fire({icon:"success",title:"Login Berhasil!",text:"Anda akan diarahkan ke dashboard",timer:2e3,timerProgressBar:!0,showConfirmButton:!1,didClose:()=>{i({to:"/DashboardSaldo"})}})):(s.fire({icon:"error",title:"Login Gagal",text:"Token tidak ditemukan pada respons backend",confirmButtonColor:"#4f46e5"}),console.error("Login gagal: Token tidak ditemukan"))}catch(t){let e="Gagal login dengan Google";e=t.response?t.response.data?.message||t.response.data?.error||"Terjadi kesalahan pada server":t.request?"Tidak ada respons dari server":t.message||"Terjadi kesalahan",s.fire({icon:"error",title:"Login Gagal",text:e,confirmButtonColor:"#4f46e5",confirmButtonText:"Coba Lagi"}),console.error("Error details:",t)}finally{l(!1)}else s.fire({icon:"error",title:"Login Gagal",text:"Tidak ada credential dari Google",confirmButtonColor:"#4f46e5"})},onError:()=>{s.fire({icon:"error",title:"Gagal Login",text:"Login dengan Google gagal. Silakan coba lagi.",confirmButtonColor:"#4f46e5"}),l(!1)},useOneTap:!0,theme:"outline",shape:"rectangular",size:"large",text:"signin_with"})},y=o("/Login/")({component:function(){const a=t(),n=f({client:{baseURL:"https://kantongpintar.my.id"}}),o=async(e,t)=>{s.fire({title:"Sedang memproses...",text:"Mohon tunggu sebentar",allowOutsideClick:!1,didOpen:()=>{s.showLoading()}});try{const o=await n.mutateAsync({data:{identifier:e,password:t}});o.data&&o.data.token&&sessionStorage.setItem("token",o.data.token),s.close(),s.fire({icon:"success",title:"Login Berhasil!",text:"Anda akan diarahkan ke dashboard",timer:2e3,timerProgressBar:!0,showConfirmButton:!1,didClose:()=>{a({to:"/DashboardSaldo"})}})}catch(o){s.close(),s.fire({icon:"error",title:"Login Gagal",text:"Email atau password salah. Silakan coba lagi.",confirmButtonColor:"#4f46e5",confirmButtonText:"Coba Lagi"}),console.error("❌ Error saat login:",o)}},i=()=>e.jsxs("div",{className:"md:hidden bg-gradient-to-r from-indigo-600 to-blue-700 text-white p-6 text-center relative",children:[e.jsxs("div",{className:"pt-2",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Kantong Pintar"}),e.jsx("p",{className:"text-indigo-200 mt-1 mb-12",children:"Manajemen Keuangan Terintegrasi"})]}),e.jsx("div",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2",children:e.jsx("div",{className:"bg-white rounded-full p-2 shadow-lg border-4 border-white",children:e.jsx("img",{src:d,alt:"Kantong Pintar Logo",className:"w-16 h-16 object-contain"})})})]}),r=()=>e.jsx("div",{className:"hidden md:flex justify-center mb-6",children:e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-blue-700 rounded-full p-1.5 shadow-md",children:e.jsx("div",{className:"bg-white rounded-full p-2",children:e.jsx("img",{src:d,alt:"Kantong Pintar Logo",className:"w-16 h-16 object-contain"})})})}),c=()=>e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"flex items-center justify-center mb-8",children:e.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-full p-3 shadow-lg",children:e.jsx("div",{className:"bg-white rounded-full p-2",children:e.jsx("img",{src:d,alt:"Kantong Pintar Logo",className:"w-16 h-16 object-contain"})})})}),e.jsx("h2",{className:"text-4xl font-bold mb-4 text-center",children:"Kelola Keuangan dengan Lebih Efisien"}),e.jsx("p",{className:"text-indigo-200 mb-8 text-center",children:"Solusi lengkap untuk manajemen keuangan bisnis, pelacakan pengeluaran, dan analisis keuangan."})]}),m=()=>e.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-xl overflow-hidden transition-all hover:shadow-2xl",children:[e.jsx(i,{}),e.jsxs("div",{className:"p-6 md:p-8 pt-16 md:pt-8",children:[e.jsx(r,{}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Masuk ke Akun Anda"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Kelola keuangan bisnis Anda dengan lebih efisien"})]}),e.jsx(w,{onSubmit:o}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-gray-600",children:["Belum punya akun?"," ",e.jsx("a",{href:"/Register",className:"font-medium text-indigo-600 hover:text-indigo-500 transition-colors",children:"Daftar sekarang"})]})}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[e.jsx("p",{className:"text-center text-gray-600 mb-4",children:"Atau masuk dengan"}),e.jsx("div",{className:"flex justify-center",children:e.jsx(k,{})})]})]})]});return e.jsx(l,{sidebar:e.jsx(c,{}),form:e.jsx(m,{})})}});export{y as Route};
